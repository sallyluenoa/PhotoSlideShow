<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1940px" preserveAspectRatio="none" style="width:1066px;height:1940px;" version="1.1" viewBox="0 0 1066 1940" width="1066px" zoomAndPan="magnify"><defs><filter height="300%" id="f14gw9vjd6yup2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFEE" height="1925.1719" style="stroke: #A80036; stroke-width: 1.0;" width="721.5" x="29" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="367.75" y="16.0669">VIPER</text><rect fill="#FFEEFF" height="1925.1719" style="stroke: #A80036; stroke-width: 1.0;" width="124" x="771" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="797" y="16.0669">Database</text><rect fill="#EEFFFF" height="1925.1719" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="897" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="936.5" y="16.0669">Web API</text><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="1798.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54" y="74.4297"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="64.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="111.5625"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="522.1563"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1048.9531"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1159.2188"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1657.2109"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="1668.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="314" y="145.6953"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="314" y="1843.7422"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="247.9609"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="402.625"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="643.4219"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="871.1563"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="454.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="1273.4844"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="828" y="1360.8828"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="672.5547"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="900.2891"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1302.6172"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1419.1484"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1532.6797"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="280.0625" style="stroke: #000000; stroke-width: 2.0;" width="743.5" x="13" y="292.0938"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="118.3984" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="23" y="446.7578"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="456.3984" style="stroke: #000000; stroke-width: 2.0;" width="1031" x="13" y="745.8203"/><rect fill="#FFFFFF" height="336" style="stroke: none; stroke-width: 1.0;" width="1031" x="13" y="762.9531"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="118.3984" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="23" y="973.5547"/><rect fill="#FFFFFF" height="103.2656" style="stroke: none; stroke-width: 1.0;" width="1031" x="13" y="1098.9531"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="236.9297" style="stroke: #000000; stroke-width: 2.0;" width="1021" x="23" y="1463.2813"/><rect fill="#FFFFFF" height="190.6641" style="stroke: none; stroke-width: 1.0;" width="1021" x="23" y="1509.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="59" x2="59" y1="58.4297" y2="1890.875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="318.5" x2="318.5" y1="58.4297" y2="1890.875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="623.5" x2="623.5" y1="58.4297" y2="1890.875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="712.5" x2="712.5" y1="58.4297" y2="1890.875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="833" x2="833" y1="58.4297" y2="1890.875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="967" x2="967" y1="58.4297" y2="1890.875"/><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="33" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="40" y="43.1279">View</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="33" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="40" y="1909.8701">View</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="274.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="281.5" y="43.1279">Presenter</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="274.5" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="281.5" y="1909.8701">Presenter</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="578.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="585.5" y="43.1279">Interactor</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="578.5" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="585.5" y="1909.8701">Interactor</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="679.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="686.5" y="43.1279">Router</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="679.5" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="686.5" y="1909.8701">Router</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="775" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="782" y="43.1279">AppDatabase</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="775" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="782" y="1909.8701">AppDatabase</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="901" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="908" y="43.1279">GoogleWebApis</text><rect fill="#FEFECE" filter="url(#f14gw9vjd6yup2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="901" y="1889.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="908" y="1909.8701">GoogleWebApis</text><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="1798.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54" y="74.4297"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="64.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="111.5625"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="522.1563"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1048.9531"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1159.2188"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="1657.2109"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="1668.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="314" y="145.6953"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="314" y="1843.7422"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="247.9609"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="402.625"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="643.4219"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="871.1563"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="454.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="619" y="1273.4844"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="828" y="1360.8828"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="672.5547"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="900.2891"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1302.6172"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1419.1484"/><rect fill="#FFFFFF" filter="url(#f14gw9vjd6yup2)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="962.5" y="1532.6797"/><polygon fill="#A80036" points="42,70.4297,52,74.4297,42,78.4297,46,74.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="48" y1="74.4297" y2="74.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="111" y1="98.5625" y2="98.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111" x2="111" y1="98.5625" y2="111.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="111" y1="111.5625" y2="111.5625"/><polygon fill="#A80036" points="80,107.5625,70,111.5625,80,115.5625,76,111.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="76" y="93.4966">Show app logo 2 secs.</text><polygon fill="#A80036" points="302,141.6953,312,145.6953,302,149.6953,306,145.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="69" x2="308" y1="145.6953" y2="145.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="76" y="140.6294">requestSignIn</text><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1051" x="3" y="204.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="204.2617" y2="204.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="207.2617" y2="207.2617"/><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="178" x="439.5" y="193.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="445.5" y="209.7622">Runtime Permissions</text><polygon fill="#A80036" points="607,243.9609,617,247.9609,607,251.9609,611,247.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="613" y1="247.9609" y2="247.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="331" y="242.895">isGrantedRuntimePermissions</text><polygon fill="#A80036" points="335,273.0938,325,277.0938,335,281.0938,331,277.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="623" y1="277.0938" y2="277.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="341" y="272.0278">Boolean</text><path d="M13,292.0938 L85,292.0938 L85,299.0938 L75,309.0938 L13,309.0938 L13,292.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="280.0625" style="stroke: #000000; stroke-width: 2.0;" width="743.5" x="13" y="292.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="28" y="305.1606">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="100" y="304.3042">[!isGrantedRuntimePermissions]</text><polygon fill="#A80036" points="701,326.3594,711,330.3594,701,334.3594,705,330.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="707" y1="330.3594" y2="330.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="331" y="325.2935">startRuntimePermissions</text><polygon fill="#A80036" points="42,340.3594,52,344.3594,42,348.3594,46,344.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3" x2="48" y1="344.3594" y2="344.3594"/><polygon fill="#A80036" points="302,369.4922,312,373.4922,302,377.4922,306,373.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="308" y1="373.4922" y2="373.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="71" y="368.4263">evaluateRequestPermissionsResult</text><polygon fill="#A80036" points="607,398.625,617,402.625,607,406.625,611,402.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="613" y1="402.625" y2="402.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="331" y="397.5591">isGrantedRuntimePermissions</text><polygon fill="#A80036" points="335,427.7578,325,431.7578,335,435.7578,331,431.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="623" y1="431.7578" y2="431.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="341" y="426.6919">Boolean</text><path d="M23,446.7578 L95,446.7578 L95,453.7578 L85,463.7578 L23,463.7578 L23,446.7578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="118.3984" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="23" y="446.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="38" y="459.8247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="110" y="458.9683">[!isGrantedRuntimePermissions]</text><polygon fill="#A80036" points="75,481.0234,65,485.0234,75,489.0234,71,485.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="313" y1="485.0234" y2="485.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="81" y="479.9575">Callback#requestSignInResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="111" y1="509.1563" y2="509.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111" x2="111" y1="509.1563" y2="522.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="111" y1="522.1563" y2="522.1563"/><polygon fill="#A80036" points="80,518.1563,70,522.1563,80,526.1563,76,522.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="76" y="504.0903">Show error dialog</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="548.1563" y2="566.1563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="566.1563" y2="548.1563"/><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1051" x="3" y="599.7227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="599.7227" y2="599.7227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="602.7227" y2="602.7227"/><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="127" x="465" y="589.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="471" y="605.2231">Google Sign In</text><polygon fill="#A80036" points="607,639.4219,617,643.4219,607,647.4219,611,643.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="613" y1="643.4219" y2="643.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="331" y="638.356">requestGoogleSilentSignIn</text><polygon fill="#A80036" points="950.5,668.5547,960.5,672.5547,950.5,676.5547,954.5,672.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="956.5" y1="672.5547" y2="672.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="636" y="667.4888">requestSilentSignIn</text><polygon fill="#A80036" points="640,697.6875,630,701.6875,640,705.6875,636,701.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="966.5" y1="701.6875" y2="701.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="646" y="696.6216">ApiResult</text><polygon fill="#A80036" points="335,726.8203,325,730.8203,335,734.8203,331,730.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="623" y1="730.8203" y2="730.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="341" y="725.7544">Callback#requestGoogleSilentSignInResult</text><path d="M13,745.8203 L79,745.8203 L79,752.8203 L69,762.8203 L13,762.8203 L13,745.8203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="456.3984" style="stroke: #000000; stroke-width: 2.0;" width="1031" x="13" y="745.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="28" y="758.8872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="94" y="758.0308">[ApiResult==SUCCEEDED]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1044" y1="763.9531" y2="763.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="18" y="774.1636">[ApiResult==INVALID]</text><polygon fill="#A80036" points="701,794.8906,711,798.8906,701,802.8906,705,798.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="707" y1="798.8906" y2="798.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="331" y="793.8247">startGoogleSignInActivity</text><polygon fill="#A80036" points="42,808.8906,52,812.8906,42,816.8906,46,812.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3" x2="48" y1="812.8906" y2="812.8906"/><polygon fill="#A80036" points="302,838.0234,312,842.0234,302,846.0234,306,842.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="308" y1="842.0234" y2="842.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="71" y="836.9575">evaluateActivityResult</text><polygon fill="#A80036" points="607,867.1563,617,871.1563,607,875.1563,611,871.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="613" y1="871.1563" y2="871.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="331" y="866.0903">isSucceededGoogleUserSignIn</text><polygon fill="#A80036" points="950.5,896.2891,960.5,900.2891,950.5,904.2891,954.5,900.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="956.5" y1="900.2891" y2="900.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="636" y="895.2231">isSucceededUserSignIn</text><polygon fill="#A80036" points="640,925.4219,630,929.4219,640,933.4219,636,929.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="966.5" y1="929.4219" y2="929.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="646" y="924.356">Boolean</text><polygon fill="#A80036" points="335,954.5547,325,958.5547,335,962.5547,331,958.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="623" y1="958.5547" y2="958.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="341" y="953.4888">Boolean</text><path d="M23,973.5547 L95,973.5547 L95,980.5547 L85,990.5547 L23,990.5547 L23,973.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="118.3984" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="23" y="973.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="38" y="986.6216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="110" y="985.7651">[!isSucceededGoogleUserSignIn]</text><polygon fill="#A80036" points="75,1007.8203,65,1011.8203,75,1015.8203,71,1011.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="313" y1="1011.8203" y2="1011.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="81" y="1006.7544">Callback#requestSignInResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="111" y1="1035.9531" y2="1035.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111" x2="111" y1="1035.9531" y2="1048.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="111" y1="1048.9531" y2="1048.9531"/><polygon fill="#A80036" points="80,1044.9531,70,1048.9531,80,1052.9531,76,1048.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="76" y="1030.8872">Show error dialog</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1074.9531" y2="1092.9531"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1092.9531" y2="1074.9531"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1044" y1="1099.9531" y2="1099.9531"/><polygon fill="#A80036" points="75,1118.0859,65,1122.0859,75,1126.0859,71,1122.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="313" y1="1122.0859" y2="1122.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="81" y="1117.02">Callback#requestSignInResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="111" y1="1146.2188" y2="1146.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111" x2="111" y1="1146.2188" y2="1159.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="111" y1="1159.2188" y2="1159.2188"/><polygon fill="#A80036" points="80,1155.2188,70,1159.2188,80,1163.2188,76,1159.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="76" y="1141.1528">Show error dialog</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1185.2188" y2="1203.2188"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1203.2188" y2="1185.2188"/><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1051" x="3" y="1229.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="1229.7852" y2="1229.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="1232.7852" y2="1232.7852"/><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="143" x="457" y="1219.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="463" y="1235.2856">Update UserInfo</text><polygon fill="#A80036" points="607,1269.4844,617,1273.4844,607,1277.4844,611,1273.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="613" y1="1273.4844" y2="1273.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="331" y="1268.4185">requestUpdateUserInfo</text><polygon fill="#A80036" points="950.5,1298.6172,960.5,1302.6172,950.5,1306.6172,954.5,1302.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="956.5" y1="1302.6172" y2="1302.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="636" y="1297.5513">getSignedInEmailAddress</text><polygon fill="#A80036" points="640,1327.75,630,1331.75,640,1335.75,636,1331.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="966.5" y1="1331.75" y2="1331.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="646" y="1326.6841">String</text><polygon fill="#A80036" points="816,1356.8828,826,1360.8828,816,1364.8828,820,1360.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="822" y1="1360.8828" y2="1360.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="636" y="1355.8169">findUserInfoByEmailAddress</text><polygon fill="#A80036" points="640,1386.0156,630,1390.0156,640,1394.0156,636,1390.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="832" y1="1390.0156" y2="1390.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="646" y="1384.9497">UserInfo?</text><polygon fill="#A80036" points="950.5,1415.1484,960.5,1419.1484,950.5,1423.1484,954.5,1419.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="956.5" y1="1419.1484" y2="1419.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="636" y="1414.0825">requestUpdateTokenInfo</text><polygon fill="#A80036" points="640,1444.2813,630,1448.2813,640,1452.2813,636,1448.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="966.5" y1="1448.2813" y2="1448.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="646" y="1443.2153">TokenInfo?</text><path d="M23,1463.2813 L89,1463.2813 L89,1470.2813 L79,1480.2813 L23,1480.2813 L23,1463.2813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="236.9297" style="stroke: #000000; stroke-width: 2.0;" width="1021" x="23" y="1463.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="38" y="1476.3481">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="104" y="1475.4917">[TokenInfo!=null]</text><polygon fill="#A80036" points="821,1497.5469,831,1501.5469,821,1505.5469,825,1501.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="827" y1="1501.5469" y2="1501.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="636" y="1496.481">updateUserInfo</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1044" y1="1510.5469" y2="1510.5469"/><polygon fill="#A80036" points="950.5,1528.6797,960.5,1532.6797,950.5,1536.6797,954.5,1532.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629" x2="956.5" y1="1532.6797" y2="1532.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="636" y="1527.6138">requestSignOut</text><polygon fill="#A80036" points="640,1557.8125,630,1561.8125,640,1565.8125,636,1561.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="634" x2="966.5" y1="1561.8125" y2="1561.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="646" y="1556.7466">ApiResult</text><polygon fill="#A80036" points="335,1586.9453,325,1590.9453,335,1594.9453,331,1590.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="618" y1="1590.9453" y2="1590.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="341" y="1585.8794">Callback#requestUpdateUserInfoResult</text><polygon fill="#A80036" points="75,1616.0781,65,1620.0781,75,1624.0781,71,1620.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="313" y1="1620.0781" y2="1620.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="81" y="1615.0122">Callback#requestSignInResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="111" y1="1644.2109" y2="1644.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111" x2="111" y1="1644.2109" y2="1657.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="111" y1="1657.2109" y2="1657.2109"/><polygon fill="#A80036" points="80,1653.2109,70,1657.2109,80,1661.2109,76,1657.2109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="76" y="1639.145">Show error dialog</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1683.2109" y2="1701.2109"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1701.2109" y2="1683.2109"/><polygon fill="#A80036" points="335,1724.3438,325,1728.3438,335,1732.3438,331,1728.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="329" x2="623" y1="1728.3438" y2="1728.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="341" y="1723.2778">Callback#requestUpdateUserInfoResult</text><rect fill="#EEEEEE" filter="url(#f14gw9vjd6yup2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1051" x="3" y="1749.3438"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="1749.3438" y2="1749.3438"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1054" y1="1752.3438" y2="1752.3438"/><polygon fill="#A80036" points="701,1781.4766,711,1785.4766,701,1789.4766,705,1785.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="707" y1="1785.4766" y2="1785.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="331" y="1780.4106">startMainActivity</text><polygon fill="#A80036" points="75,1810.6094,65,1814.6094,75,1818.6094,71,1814.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="318" y1="1814.6094" y2="1814.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="81" y="1809.5435">Callback#requestSignInResult</text><polygon fill="#A80036" points="302,1839.7422,312,1843.7422,302,1847.7422,306,1843.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="308" y1="1843.7422" y2="1843.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="71" y="1838.6763">destroy</text><polygon fill="#A80036" points="612,1868.875,622,1872.875,612,1876.875,616,1872.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="618" y1="1872.875" y2="1872.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="326" y="1867.8091">destroy</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="615" x2="633" y1="1863.875" y2="1881.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="615" x2="633" y1="1881.875" y2="1863.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="310" x2="328" y1="1863.875" y2="1881.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="310" x2="328" y1="1881.875" y2="1863.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1863.875" y2="1881.875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="50" x2="68" y1="1881.875" y2="1863.875"/><!--MD5=[f0686315e097205f865d99a40cac2733]
@startuml
box "VIPER" #FFFFEE
  participant View
  participant Presenter
  participant Interactor
  participant Router
end box

box "Database" #FFEEFF
  participant AppDatabase
end box

box "Web API" #EEFFFF
  participant GoogleWebApis
end box


[-> View
activate View
View -> View++: Show app logo 2 secs.

View -> Presenter++: requestSignIn
View- -

== Runtime Permissions ==

Presenter -> Interactor++: isGrantedRuntimePermissions
return Boolean

opt !isGrantedRuntimePermissions
  Presenter -> Router: startRuntimePermissions
  [- -> View
  View - -> Presenter: evaluateRequestPermissionsResult

  Presenter -> Interactor++: isGrantedRuntimePermissions  
  return Boolean

  opt !isGrantedRuntimePermissions
    View <- - Presenter: Callback#requestSignInResult
    View -> View++: Show error dialog
    destroy View
  end
end

== Google Sign In ==

Presenter -> Interactor++: requestGoogleSilentSignIn
  Interactor -> GoogleWebApis++: requestSilentSignIn
  return ApiResult
return Callback#requestGoogleSilentSignInResult

alt ApiResult==SUCCEEDED

else ApiResult==INVALID

  Presenter -> Router: startGoogleSignInActivity
  [- -> View
  View - -> Presenter: evaluateActivityResult

  Presenter -> Interactor++: isSucceededGoogleUserSignIn
    Interactor -> GoogleWebApis++: isSucceededUserSignIn
    return Boolean  
  return Boolean

  opt !isSucceededGoogleUserSignIn
    View <- - Presenter: Callback#requestSignInResult
    View -> View++: Show error dialog
    destroy View
  end

else
    View <- - Presenter: Callback#requestSignInResult
    View -> View++: Show error dialog
    destroy View
end

== Update UserInfo ==

Presenter -> Interactor++: requestUpdateUserInfo

Interactor -> GoogleWebApis++: getSignedInEmailAddress
return String

Interactor -> AppDatabase++: findUserInfoByEmailAddress
return UserInfo?

Interactor -> GoogleWebApis++: requestUpdateTokenInfo
return TokenInfo?

alt TokenInfo!=null
  Interactor -> AppDatabase: updateUserInfo
else
  Interactor -> GoogleWebApis++: requestSignOut
  return ApiResult
  Presenter <- - Interactor: Callback#requestUpdateUserInfoResult
  View <- - Presenter: Callback#requestSignInResult
  View -> View++: Show error dialog
  destroy View
end

Presenter <- - Interactor- -: Callback#requestUpdateUserInfoResult

====

Presenter -> Router: startMainActivity
View <- - Presenter- -: Callback#requestSignInResult

View -> Presenter++: destroy
Presenter -> Interactor!!: destroy
destroy Presenter
destroy View
@enduml

PlantUML version 1.2020.16beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>