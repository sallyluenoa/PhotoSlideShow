<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1470px" preserveAspectRatio="none" style="width:1374px;height:1470px;" version="1.1" viewBox="0 0 1374 1470" width="1374px" zoomAndPan="magnify"><defs><filter height="300%" id="f1hj9nv2ycayns" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFEE" height="1455.6406" style="stroke: #A80036; stroke-width: 1.0;" width="876.5" x="29" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="445.25" y="16.0669">VIPER</text><rect fill="#FFEEFF" height="1455.6406" style="stroke: #A80036; stroke-width: 1.0;" width="124" x="907.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="933.5" y="16.0669">Database</text><rect fill="#E6FFE9" height="1455.6406" style="stroke: #A80036; stroke-width: 1.0;" width="161" x="1033.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1101" y="16.0669">File</text><rect fill="#EEFFFF" height="1455.6406" style="stroke: #A80036; stroke-width: 1.0;" width="150" x="1196.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1240.5" y="16.0669">Web API</text><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="257.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54" y="68.4297"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="176.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="89.5625"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="1107.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="295.4922"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="344" y="502.1563"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="344" y="817.2188"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="118.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="118.6953"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="397.7578"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="616.4219"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="938.4844"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="1229.6797"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="964.5" y="171.9609"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="964.5" y="1287.9453"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1109" y="1092.1484"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1266.5" y="991.75"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="454" x="583.5" y="133.6953"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="103.2656" style="stroke: #000000; stroke-width: 2.0;" width="381" x="23" y="441.8906"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="206.6641" style="stroke: #000000; stroke-width: 2.0;" width="898.5" x="13" y="660.5547"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="103.2656" style="stroke: #000000; stroke-width: 2.0;" width="381" x="23" y="756.9531"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="175.7969" style="stroke: #000000; stroke-width: 2.0;" width="769" x="583.5" y="953.4844"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="59" x2="59" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="343.5" x2="343.5" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="638.5" x2="638.5" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="867.5" x2="867.5" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="969.5" x2="969.5" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1113.5" x2="1113.5" y1="58.4297" y2="1421.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1271.5" x2="1271.5" y1="58.4297" y2="1421.3438"/><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="33" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="40" y="43.1279">View</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="33" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="40" y="1440.3389">View</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="299.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="306.5" y="43.1279">Presenter</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="299.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="306.5" y="1440.3389">Presenter</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="593.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="600.5" y="43.1279">Interactor</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="593.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="600.5" y="1440.3389">Interactor</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="834.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="841.5" y="43.1279">Router</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="834.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="841.5" y="1440.3389">Router</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="911.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="918.5" y="43.1279">AppDatabase</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="911.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="918.5" y="1440.3389">AppDatabase</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="1037.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="1044.5" y="43.1279">PhotosDownloader</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="1037.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="1044.5" y="1440.3389">PhotosDownloader</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="1200.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="1207.5" y="43.1279">PhotosLibraryApi</text><rect fill="#FEFECE" filter="url(#f1hj9nv2ycayns)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="1200.5" y="1420.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="1207.5" y="1440.3389">PhotosLibraryApi</text><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="257.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54" y="68.4297"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="176.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="89.5625"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="1107.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="295.4922"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="344" y="502.1563"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="344" y="817.2188"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="118.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="118.6953"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="397.7578"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="616.4219"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="938.4844"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="116.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="634" y="1229.6797"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="964.5" y="171.9609"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="964.5" y="1287.9453"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1109" y="1092.1484"/><rect fill="#FFFFFF" filter="url(#f1hj9nv2ycayns)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1266.5" y="991.75"/><polygon fill="#A80036" points="327,85.5625,337,89.5625,327,93.5625,331,89.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="333" y1="89.5625" y2="89.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="71" y="84.4966">requestLoadDisplayedPhotos</text><polygon fill="#A80036" points="622,114.6953,632,118.6953,622,122.6953,626,118.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="628" y1="118.6953" y2="118.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="356" y="113.6294">requestLoadDisplayedPhotos</text><path d="M583.5,133.6953 L655.5,133.6953 L655.5,140.6953 L645.5,150.6953 L583.5,150.6953 L583.5,133.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="454" x="583.5" y="133.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="598.5" y="146.7622">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="670.5" y="145.9058">[this.userInfoData.id == 0]</text><polygon fill="#A80036" points="952.5,167.9609,962.5,171.9609,952.5,175.9609,956.5,171.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="958.5" y1="171.9609" y2="171.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="651" y="166.895">findUserInfoDataByEmailAddress</text><polygon fill="#A80036" points="655,197.0938,645,201.0938,655,205.0938,651,201.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="649" x2="968.5" y1="201.0938" y2="201.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="661" y="196.0278">UserInfoData?</text><polygon fill="#A80036" points="360,233.2266,350,237.2266,360,241.2266,356,237.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="354" x2="638" y1="237.2266" y2="237.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="366" y="232.1606">Callback#requestLoadDisplayedPhotos</text><polygon fill="#A80036" points="75,262.3594,65,266.3594,75,270.3594,71,266.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="343" y1="266.3594" y2="266.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="81" y="261.2935">Callback#requestLoadDisplayedPhotos</text><polygon fill="#A80036" points="327,291.4922,337,295.4922,327,299.4922,331,295.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="333" y1="295.4922" y2="295.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="71" y="290.4263">requestUpdateDisplayedPhotos</text><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1359.5" x="3" y="354.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="354.0586" y2="354.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="357.0586" y2="357.0586"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="127" x="619.25" y="343.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="625.25" y="359.5591">Config Update</text><polygon fill="#A80036" points="622,393.7578,632,397.7578,622,401.7578,626,397.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="628" y1="397.7578" y2="397.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="356" y="392.6919">isNeededUpdatePhotos</text><polygon fill="#A80036" points="360,422.8906,350,426.8906,360,430.8906,356,426.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="354" x2="638" y1="426.8906" y2="426.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="366" y="421.8247">Boolean</text><path d="M23,441.8906 L95,441.8906 L95,448.8906 L85,458.8906 L23,458.8906 L23,441.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="103.2656" style="stroke: #000000; stroke-width: 2.0;" width="381" x="23" y="441.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="38" y="454.9575">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="110" y="454.1011">[!isNeededUpdatePhotos]</text><polygon fill="#A80036" points="70,476.1563,60,480.1563,70,484.1563,66,480.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="338" y1="480.1563" y2="480.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="76" y="475.0903">Callback#requestUpdatePhotosResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="396" y1="489.1563" y2="489.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="396" x2="396" y1="489.1563" y2="502.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="396" y1="502.1563" y2="502.1563"/><polygon fill="#A80036" points="365,498.1563,355,502.1563,365,506.1563,361,502.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="353" y1="528.1563" y2="546.1563"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="353" y1="546.1563" y2="528.1563"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1359.5" x="3" y="572.7227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="572.7227" y2="572.7227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="575.7227" y2="575.7227"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="190" x="587.75" y="562.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="593.75" y="578.2231">Decide Selected Album</text><polygon fill="#A80036" points="622,612.4219,632,616.4219,622,620.4219,626,616.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="628" y1="616.4219" y2="616.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="356" y="611.356">hasSelectedAlbums</text><polygon fill="#A80036" points="360,641.5547,350,645.5547,360,649.5547,356,645.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="354" x2="638" y1="645.5547" y2="645.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="366" y="640.4888">Boolean</text><path d="M13,660.5547 L85,660.5547 L85,667.5547 L75,677.5547 L13,677.5547 L13,660.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="206.6641" style="stroke: #000000; stroke-width: 2.0;" width="898.5" x="13" y="660.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="28" y="673.6216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="100" y="672.7651">[!hasSelectedAlbums]</text><polygon fill="#A80036" points="856,694.8203,866,698.8203,856,702.8203,860,698.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="862" y1="698.8203" y2="698.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="356" y="693.7544">startSelectActivity</text><polygon fill="#A80036" points="47,708.8203,57,712.8203,47,716.8203,51,712.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3" x2="53" y1="712.8203" y2="712.8203"/><polygon fill="#A80036" points="327,737.9531,337,741.9531,327,745.9531,331,741.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="59" x2="333" y1="741.9531" y2="741.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="66" y="736.8872">evaluateActivityResult</text><path d="M23,756.9531 L95,756.9531 L95,763.9531 L85,773.9531 L23,773.9531 L23,756.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="103.2656" style="stroke: #000000; stroke-width: 2.0;" width="381" x="23" y="756.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="38" y="770.02">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="286" x="110" y="769.1636">[Is selected album not found or canceled?]</text><polygon fill="#A80036" points="70,791.2188,60,795.2188,70,799.2188,66,795.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="338" y1="795.2188" y2="795.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="76" y="790.1528">Callback#requestUpdatePhotosResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="396" y1="804.2188" y2="804.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="396" x2="396" y1="804.2188" y2="817.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="396" y1="817.2188" y2="817.2188"/><polygon fill="#A80036" points="365,813.2188,355,817.2188,365,821.2188,361,817.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="353" y1="843.2188" y2="861.2188"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="353" y1="861.2188" y2="843.2188"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1359.5" x="3" y="894.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="894.7852" y2="894.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="897.7852" y2="897.7852"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="152" x="606.75" y="884.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="612.75" y="900.2856">Download Images</text><polygon fill="#A80036" points="622,934.4844,632,938.4844,622,942.4844,626,938.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="628" y1="938.4844" y2="938.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="356" y="933.4185">requestDownloadPhotos</text><path d="M583.5,953.4844 L661.5,953.4844 L661.5,960.4844 L651.5,970.4844 L583.5,970.4844 L583.5,953.4844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="175.7969" style="stroke: #000000; stroke-width: 2.0;" width="769" x="583.5" y="953.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="598.5" y="966.5513">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="676.5" y="965.6948">[albums.foreach]</text><polygon fill="#A80036" points="1254.5,987.75,1264.5,991.75,1254.5,995.75,1258.5,991.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="1260.5" y1="991.75" y2="991.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="651" y="986.6841">requestMediaItems</text><polygon fill="#A80036" points="655,1016.8828,645,1020.8828,655,1024.8828,651,1020.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="649" x2="1270.5" y1="1020.8828" y2="1020.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="661" y="1015.8169">List&lt;MediaItem&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="686" y1="1050.0156" y2="1050.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="686" x2="686" y1="1050.0156" y2="1063.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="645" x2="686" y1="1063.0156" y2="1063.0156"/><polygon fill="#A80036" points="655,1059.0156,645,1063.0156,655,1067.0156,651,1063.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="651" y="1044.9497">Make random photo MediaItems</text><polygon fill="#A80036" points="1097,1088.1484,1107,1092.1484,1097,1096.1484,1101,1092.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="1103" y1="1092.1484" y2="1092.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="651" y="1087.0825">requestDownloads</text><polygon fill="#A80036" points="655,1117.2813,645,1121.2813,655,1125.2813,651,1121.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="649" x2="1113" y1="1121.2813" y2="1121.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="661" y="1116.2153">List&lt;String&gt;</text><polygon fill="#A80036" points="360,1153.4141,350,1157.4141,360,1161.4141,356,1157.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="354" x2="638" y1="1157.4141" y2="1157.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="366" y="1152.3481">Callback#requestDownloadPhotosResult</text><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1359.5" x="3" y="1185.9805"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="1185.9805" y2="1185.9805"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="1188.9805" y2="1188.9805"/><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="150" x="607.75" y="1175.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="613.75" y="1191.481">Update Database</text><polygon fill="#A80036" points="622,1225.6797,632,1229.6797,622,1233.6797,626,1229.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="628" y1="1229.6797" y2="1229.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="356" y="1224.6138">requestUpdateDatabase</text><polygon fill="#A80036" points="957.5,1254.8125,967.5,1258.8125,957.5,1262.8125,961.5,1258.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="963.5" y1="1258.8125" y2="1258.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="651" y="1253.7466">replaceSelectedData</text><polygon fill="#A80036" points="952.5,1283.9453,962.5,1287.9453,952.5,1291.9453,956.5,1287.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="958.5" y1="1287.9453" y2="1287.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="651" y="1282.8794">findUserInfoDataById</text><polygon fill="#A80036" points="655,1313.0781,645,1317.0781,655,1321.0781,651,1317.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="649" x2="968.5" y1="1317.0781" y2="1317.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="661" y="1312.0122">UserInfoData?</text><polygon fill="#A80036" points="360,1342.2109,350,1346.2109,360,1350.2109,356,1346.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="354" x2="638" y1="1346.2109" y2="1346.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="366" y="1341.145">Callback#requestUpdateDatabaseResult</text><rect fill="#EEEEEE" filter="url(#f1hj9nv2ycayns)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1359.5" x="3" y="1367.2109"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="1367.2109" y2="1367.2109"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1362.5" y1="1370.2109" y2="1370.2109"/><polygon fill="#A80036" points="70,1399.3438,60,1403.3438,70,1407.3438,66,1403.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64" x2="343" y1="1403.3438" y2="1403.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="76" y="1398.2778">Callback#requestUpdatePhotosResult</text><!--MD5=[488c17a9c704d26b31ac35669f77fa87]
@startuml
box "VIPER" #FFFFEE
  participant View
  participant Presenter
  participant Interactor
  participant Router
end box

box "Database" #FFEEFF
  participant AppDatabase
end box

box "File" #E6FFE9
  participant PhotosDownloader
end box

box "Web API" #EEFFFF
  participant PhotosLibraryApi
end box

View++
View -> Presenter++: requestLoadDisplayedPhotos
  Presenter -> Interactor++: requestLoadDisplayedPhotos

  opt this.userInfoData.id == 0
    Interactor -> AppDatabase++: findUserInfoDataByEmailAddress
    return UserInfoData?
  end

  return Callback#requestLoadDisplayedPhotos
return Callback#requestLoadDisplayedPhotos

View -> Presenter++: requestUpdateDisplayedPhotos
View- -

== Config Update ==

Presenter -> Interactor++: isNeededUpdatePhotos
return Boolean

opt !isNeededUpdatePhotos
  View <- - Presenter: Callback#requestUpdatePhotosResult
  Presenter -> Presenter++
  destroy Presenter
end

== Decide Selected Album ==

Presenter -> Interactor++: hasSelectedAlbums
return Boolean

opt !hasSelectedAlbums
  Presenter -> Router: startSelectActivity
  [- -> View
  View - -> Presenter: evaluateActivityResult

  opt Is selected album not found or canceled?
    View <- - Presenter: Callback#requestUpdatePhotosResult
    Presenter -> Presenter++
    destroy Presenter
  end
end

== Download Images ==

Presenter -> Interactor++: requestDownloadPhotos

  loop albums.foreach
    Interactor -> PhotosLibraryApi++: requestMediaItems
    return List<MediaItem>

    Interactor -> Interactor: Make random photo MediaItems

    Interactor -> PhotosDownloader++: requestDownloads
    return List<String>
  end

return Callback#requestDownloadPhotosResult

== Update Database ==

Presenter -> Interactor++: requestUpdateDatabase
  Interactor -> AppDatabase: replaceSelectedData
  Interactor -> AppDatabase++: findUserInfoDataById
  return UserInfoData?
return Callback#requestUpdateDatabaseResult

====

View <- - Presenter- -: Callback#requestUpdatePhotosResult
@enduml

PlantUML version 1.2020.16beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>