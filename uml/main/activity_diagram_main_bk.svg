<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="929px" preserveAspectRatio="none" style="width:315px;height:929px;" version="1.1" viewBox="0 0 315 929" width="315px" zoomAndPan="magnify"><defs><filter height="300%" id="f32kx4s8x3mau" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="41" y="11"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="191" x="51" y="32.1387">requestUpdateDisplayedPhotos</text><polygon fill="#FEFECE" filter="url(#f32kx4s8x3mau)" points="80,64.9688,213,64.9688,225,76.9688,213,88.9688,80,88.9688,68,76.9688,80,64.9688" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="80" y="80.7769">isNeededUpdatePhotos</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="225" y="74.3745">NO</text><ellipse cx="264" cy="76.9688" fill="#FFFFFF" filter="url(#f32kx4s8x3mau)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="264" cy="76.9688" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f32kx4s8x3mau)" height="382.6055" style="stroke: #000000; stroke-width: 2.0;" width="252" x="46.5" y="98.9688"/><path d="M152.5,98.9688 L152.5,108.2656 L142.5,118.2656 L46.5,118.2656 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="49.5" y="112.9639">DecideAlbum</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="69.5" y="183.668"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="79.5" y="204.8066">requestSharedAlbums</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="82.5" y="237.6367"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="92.5" y="258.7754">startSelectActivity</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="89.5" y="291.6055"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="99.5" y="312.7441">onActivityResult</text><polygon fill="#FEFECE" filter="url(#f32kx4s8x3mau)" points="94.5,347.6055,198.5,347.6055,210.5,359.6055,198.5,371.6055,94.5,371.6055,82.5,359.6055,94.5,347.6055" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="94.5" y="363.4136">resultCode == OK</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="210.5" y="357.0112">NO</text><ellipse cx="249.5" cy="359.6055" fill="#FFFFFF" filter="url(#f32kx4s8x3mau)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="249.5" cy="359.6055" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="66.5" y="391.6055"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="76.5" y="412.7441">updateSelectedAlbums</text><polygon fill="#FEFECE" filter="url(#f32kx4s8x3mau)" points="89.5,135.2656,203.5,135.2656,215.5,147.2656,203.5,159.2656,89.5,159.2656,77.5,147.2656,89.5,135.2656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="150.5" y="169.4761">NO</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="89.5" y="151.0737">hasSelectedAlbums</text><polygon fill="#FEFECE" filter="url(#f32kx4s8x3mau)" points="146.5,445.5742,158.5,457.5742,146.5,469.5742,134.5,457.5742,146.5,445.5742" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f32kx4s8x3mau)" height="325.1719" style="stroke: #000000; stroke-width: 2.0;" width="274" x="11" y="491.5742"/><path d="M255,491.5742 L255,500.8711 L245,510.8711 L11,510.8711 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="234" x="14" y="505.5693">DownloadImages_and_UpdateDB</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="39" y="571.8711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="49" y="593.0098">requestMediaItemsFromAlbumId</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="39.5" y="625.8398"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="49.5" y="646.9785">Make random photo MediaItems</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="48.5" y="694.8086"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="58.5" y="715.9473">requestDownloadMediaItems</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="65.5" y="748.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="75.5" y="769.916">updateDisplayedPhotos</text><polygon fill="#FEFECE" filter="url(#f32kx4s8x3mau)" points="77.5,527.8711,215.5,527.8711,227.5,539.8711,215.5,551.8711,77.5,551.8711,65.5,539.8711,77.5,527.8711" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="77.5" y="543.6792">selectedAlbums.foreach</text><rect fill="#FEFECE" filter="url(#f32kx4s8x3mau)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="64" y="836.7461"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="74" y="857.8848">notifyUpdatedPhotoData</text><ellipse cx="146.5" cy="901.7148" fill="#FFFFFF" filter="url(#f32kx4s8x3mau)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="146.5" cy="901.7148" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="88.9688" y2="135.2656"/><polygon fill="#A80036" points="142.5,125.2656,146.5,135.2656,150.5,125.2656,146.5,129.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="253" y1="76.9688" y2="76.9688"/><polygon fill="#A80036" points="243,72.9688,253,76.9688,243,80.9688,247,76.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="44.9688" y2="64.9688"/><polygon fill="#A80036" points="142.5,54.9688,146.5,64.9688,150.5,54.9688,146.5,58.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="217.6367" y2="237.6367"/><polygon fill="#A80036" points="142.5,227.6367,146.5,237.6367,150.5,227.6367,146.5,231.6367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="271.6055" y2="291.6055"/><polygon fill="#A80036" points="142.5,281.6055,146.5,291.6055,150.5,281.6055,146.5,285.6055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="371.6055" y2="391.6055"/><polygon fill="#A80036" points="142.5,381.6055,146.5,391.6055,150.5,381.6055,146.5,385.6055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="210.5" x2="238.5" y1="359.6055" y2="359.6055"/><polygon fill="#A80036" points="228.5,355.6055,238.5,359.6055,228.5,363.6055,232.5,359.6055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="325.5742" y2="347.6055"/><polygon fill="#A80036" points="142.5,337.6055,146.5,347.6055,150.5,337.6055,146.5,341.6055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="159.2656" y2="183.668"/><polygon fill="#A80036" points="142.5,173.668,146.5,183.668,150.5,173.668,146.5,177.668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="215.5" x2="282.5" y1="147.2656" y2="147.2656"/><polygon fill="#A80036" points="278.5,317.6055,282.5,327.6055,286.5,317.6055,282.5,321.6055" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282.5" x2="282.5" y1="147.2656" y2="457.5742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282.5" x2="158.5" y1="457.5742" y2="457.5742"/><polygon fill="#A80036" points="168.5,453.5742,158.5,457.5742,168.5,461.5742,164.5,457.5742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="425.5742" y2="445.5742"/><polygon fill="#A80036" points="142.5,435.5742,146.5,445.5742,150.5,435.5742,146.5,439.5742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="605.8398" y2="625.8398"/><polygon fill="#A80036" points="142.5,615.8398,146.5,625.8398,150.5,615.8398,146.5,619.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="659.8086" y2="694.8086"/><polygon fill="#A80036" points="142.5,684.8086,146.5,694.8086,150.5,684.8086,146.5,688.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="728.7773" y2="748.7773"/><polygon fill="#A80036" points="142.5,738.7773,146.5,748.7773,150.5,738.7773,146.5,742.7773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="551.8711" y2="571.8711"/><polygon fill="#A80036" points="142.5,561.8711,146.5,571.8711,150.5,561.8711,146.5,565.8711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="782.7461" y2="792.7461"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="266" y1="792.7461" y2="792.7461"/><polygon fill="#A80036" points="262,675.3086,266,665.3086,270,675.3086,266,671.3086" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="266" x2="266" y1="539.8711" y2="792.7461"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="266" x2="227.5" y1="539.8711" y2="539.8711"/><polygon fill="#A80036" points="237.5,535.8711,227.5,539.8711,237.5,543.8711,233.5,539.8711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="65.5" x2="27" y1="539.8711" y2="539.8711"/><polygon fill="#A80036" points="23,661.3086,27,671.3086,31,661.3086,27,665.3086" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="27" x2="27" y1="539.8711" y2="804.7461"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="27" x2="146.5" y1="804.7461" y2="804.7461"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="804.7461" y2="836.7461"/><polygon fill="#A80036" points="142.5,826.7461,146.5,836.7461,150.5,826.7461,146.5,830.7461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="469.5742" y2="527.8711"/><polygon fill="#A80036" points="142.5,517.8711,146.5,527.8711,150.5,517.8711,146.5,521.8711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="146.5" y1="870.7148" y2="890.7148"/><polygon fill="#A80036" points="142.5,880.7148,146.5,890.7148,150.5,880.7148,146.5,884.7148" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cb5304638902771f177b9f064161fefc]
@startuml
:requestUpdateDisplayedPhotos;

if (isNeededUpdatePhotos) then (NO)
  stop
endif

partition DecideAlbum {
  if (hasSelectedAlbums) then (NO)
    :requestSharedAlbums;
    :startSelectActivity;
    :onActivityResult;

    if (resultCode == OK) then (NO)
      stop
    endif

    :updateSelectedAlbums;
  endif
}

partition DownloadImages_and_UpdateDB {
  while (selectedAlbums.foreach)
    :requestMediaItemsFromAlbumId;
    :Make random photo MediaItems;
    :requestDownloadMediaItems;
    :updateDisplayedPhotos;
  end while
}

:notifyUpdatedPhotoData;
stop
@enduml

PlantUML version 1.2020.16beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>