<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="934px" preserveAspectRatio="none" style="width:323px;height:934px;" version="1.1" viewBox="0 0 323 934" width="323px" zoomAndPan="magnify"><defs><filter height="300%" id="f7of8vgp4kfw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="66" y="11"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="76" y="32.1387">requestUpdatePhotoData</text><polygon fill="#FEFECE" filter="url(#f7of8vgp4kfw)" points="79.5,64.9688,223.5,64.9688,235.5,76.9688,223.5,88.9688,79.5,88.9688,67.5,76.9688,79.5,64.9688" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="79.5" y="80.7769">Is needed photo update?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="235.5" y="74.3745">NO</text><ellipse cx="274.5" cy="76.9688" fill="#FFFFFF" filter="url(#f7of8vgp4kfw)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="274.5" cy="76.9688" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f7of8vgp4kfw)" height="174.668" style="stroke: #000000; stroke-width: 2.0;" width="295" x="11" y="98.9688"/><path d="M167,99.9688 L167,108.2656 L157,118.2656 L11,118.2656 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="146" x="14" y="112.9639">UpdateAccessToken</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="23" y="183.668"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="237" x="33" y="204.8066">requestAccessTokenWithRefreshToken</text><polygon fill="#FEFECE" filter="url(#f7of8vgp4kfw)" points="81,135.2656,222,135.2656,234,147.2656,222,159.2656,81,159.2656,69,147.2656,81,135.2656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="155.5" y="169.4761">YES</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="81" y="151.0737">Is expired accessToken?</text><polygon fill="#FEFECE" filter="url(#f7of8vgp4kfw)" points="151.5,237.6367,163.5,249.6367,151.5,261.6367,139.5,249.6367,151.5,237.6367" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f7of8vgp4kfw)" height="282.6055" style="stroke: #000000; stroke-width: 2.0;" width="220" x="52" y="283.6367"/><path d="M158,284.6367 L158,292.9336 L148,302.9336 L52,302.9336 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="55" y="297.6318">DecideAlbum</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="74.5" y="368.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="84.5" y="389.4746">requestSharedAlbums</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="87.5" y="422.3047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="97.5" y="443.4434">startSelectActivity</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="102" y="476.2734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="112" y="497.4121">ActivityResult</text><polygon fill="#FEFECE" filter="url(#f7of8vgp4kfw)" points="74,319.9336,229,319.9336,241,331.9336,229,343.9336,74,343.9336,62,331.9336,74,319.9336" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="155.5" y="354.144">YES</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="74" y="335.7417">Has selected album in DB?</text><polygon fill="#FEFECE" filter="url(#f7of8vgp4kfw)" points="151.5,530.2422,163.5,542.2422,151.5,554.2422,139.5,542.2422,151.5,530.2422" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f7of8vgp4kfw)" height="244.1719" style="stroke: #000000; stroke-width: 2.0;" width="254" x="24.5" y="577.0439"/><path d="M268.5,578.0439 L268.5,586.3408 L258.5,596.3408 L24.5,596.3408 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="234" x="27.5" y="591.0391">DownloadImages_and_UpdateDB</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="44" y="613.3408"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="54" y="634.4795">requestMediaItemsFromAlbumId</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="44.5" y="667.3096"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="54.5" y="688.4482">Make random photo MediaItems</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="43.5" y="721.2783"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="53.5" y="742.417">Download MediaItem image files</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="73.5" y="775.2471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="83.5" y="796.3857">update MediaItems DB</text><rect fill="#FEFECE" filter="url(#f7of8vgp4kfw)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="69" y="841.2158"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="79" y="862.3545">notifyUpdatedPhotoData</text><ellipse cx="151.5" cy="906.1846" fill="#FFFFFF" filter="url(#f7of8vgp4kfw)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="151.5" cy="906.1846" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="88.9688" y2="135.2656"/><polygon fill="#A80036" points="147.5,125.2656,151.5,135.2656,155.5,125.2656,151.5,129.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="235.5" x2="263.5" y1="76.9688" y2="76.9688"/><polygon fill="#A80036" points="253.5,72.9688,263.5,76.9688,253.5,80.9688,257.5,76.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="44.9688" y2="64.9688"/><polygon fill="#A80036" points="147.5,54.9688,151.5,64.9688,155.5,54.9688,151.5,58.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="159.2656" y2="183.668"/><polygon fill="#A80036" points="147.5,173.668,151.5,183.668,155.5,173.668,151.5,177.668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="234" x2="290" y1="147.2656" y2="147.2656"/><polygon fill="#A80036" points="286,190.6523,290,200.6523,294,190.6523,290,194.6523" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="290" x2="290" y1="147.2656" y2="249.6367"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="290" x2="163.5" y1="249.6367" y2="249.6367"/><polygon fill="#A80036" points="173.5,245.6367,163.5,249.6367,173.5,253.6367,169.5,249.6367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="217.6367" y2="237.6367"/><polygon fill="#A80036" points="147.5,227.6367,151.5,237.6367,155.5,227.6367,151.5,231.6367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="402.3047" y2="422.3047"/><polygon fill="#A80036" points="147.5,412.3047,151.5,422.3047,155.5,412.3047,151.5,416.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="456.2734" y2="476.2734"/><polygon fill="#A80036" points="147.5,466.2734,151.5,476.2734,155.5,466.2734,151.5,470.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="343.9336" y2="368.3359"/><polygon fill="#A80036" points="147.5,358.3359,151.5,368.3359,155.5,358.3359,151.5,362.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241" x2="253" y1="331.9336" y2="331.9336"/><polygon fill="#A80036" points="249,429.2891,253,439.2891,257,429.2891,253,433.2891" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="253" x2="253" y1="331.9336" y2="542.2422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="253" x2="163.5" y1="542.2422" y2="542.2422"/><polygon fill="#A80036" points="173.5,538.2422,163.5,542.2422,173.5,546.2422,169.5,542.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="510.2422" y2="530.2422"/><polygon fill="#A80036" points="147.5,520.2422,151.5,530.2422,155.5,520.2422,151.5,524.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="261.6367" y2="319.9336"/><polygon fill="#A80036" points="147.5,309.9336,151.5,319.9336,155.5,309.9336,151.5,313.9336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="647.3096" y2="667.3096"/><polygon fill="#A80036" points="147.5,657.3096,151.5,667.3096,155.5,657.3096,151.5,661.3096" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="701.2783" y2="721.2783"/><polygon fill="#A80036" points="147.5,711.2783,151.5,721.2783,155.5,711.2783,151.5,715.2783" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="755.2471" y2="775.2471"/><polygon fill="#A80036" points="147.5,765.2471,151.5,775.2471,155.5,765.2471,151.5,769.2471" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="554.2422" y2="613.3408"/><polygon fill="#A80036" points="147.5,603.3408,151.5,613.3408,155.5,603.3408,151.5,607.3408" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="809.2158" y2="841.2158"/><polygon fill="#A80036" points="147.5,831.2158,151.5,841.2158,155.5,831.2158,151.5,835.2158" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="151.5" x2="151.5" y1="875.1846" y2="895.1846"/><polygon fill="#A80036" points="147.5,885.1846,151.5,895.1846,155.5,885.1846,151.5,889.1846" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7243bf5759f1ad11075a82e363ed057f]
@startuml
:requestUpdatePhotoData;

if (Is needed photo update?) then (NO)
  stop
endif

partition UpdateAccessToken {
  if (Is expired accessToken?) then (YES)
    :requestAccessTokenWithRefreshToken;
  endif
}

partition DecideAlbum {
  if (Has selected album in DB?) then (YES)
    :requestSharedAlbums;
    :startSelectActivity;
    :ActivityResult;
  endif
}

partition DownloadImages_and_UpdateDB {
  :requestMediaItemsFromAlbumId;
  :Make random photo MediaItems;
  :Download MediaItem image files;
  :update MediaItems DB;
}

:notifyUpdatedPhotoData;
stop
@enduml

PlantUML version 1.2020.15beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>